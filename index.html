<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>10 Code Store — Sahibul Musa Sium</title>
  <style>
    body { font-family: system-ui, Arial; margin:0; padding:20px; background:#f5f7fb; color:#111; }
    h1 { font-size:22px; margin-bottom:20px; text-align:center; }
    section.snippet { margin-bottom:30px; background:white; padding:15px; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
    h2 { margin-top:0; font-size:16px; color:#2563eb; }
    .subtitle { font-size:13px; color:#555; margin-top:-5px; margin-bottom:10px; font-style:italic; }
    textarea { width:100%; height:220px; box-sizing:border-box; font-family:"Courier New", monospace; font-size:13px;
      padding:10px; border-radius:8px; border:1px solid #d7e0ef; background:#fdfdfd; white-space:pre; overflow:auto; resize:vertical; }
    .controls { margin-top:8px; display:flex; gap:10px; flex-wrap:wrap; }
    button { padding:8px 12px; border-radius:6px; border:1px solid #ccc; cursor:pointer; }
    button:hover { background:#f0f0f0; }
    .btn-blue { background:#2563eb; color:white; border-color:#1e4ed8; }
    .btn-green { background:#0d9488; color:white; border-color:#0b806f; }

    <!-- Password overlay CSS (paste inside <head>) -->
  #pw-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(2,6,23,0.92);
    z-index: 99999;
    padding: 20px;
  }
  .pw-card {
    width: 100%;
    max-width: 460px;
    background: #071023;
    padding: 18px;
    border-radius: 10px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    color: #e6f7ff;
    border: 1px solid rgba(255,255,255,0.04);
  }
  .pw-card h2 { margin:0 0 8px; font-size:18px; color:#7dd3fc; }
  .pw-card p { margin:0 0 12px; color:#cbd5e1; font-size:14px; }
  .pw-card input[type="password"]{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.02);
    color:#fff;
    font-size:14px;
    margin-bottom:10px;
  }
  .pw-card button{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:0;
    background:#06b6d4;
    color:#022;
    font-weight:700;
    cursor:pointer;
  }
  .pw-note{ font-size:12px; color:#9ecfff; margin-top:8px; text-align:center; }
  /* hide overlay when aria-hidden true (for accidental display) */
  #pw-overlay[aria-hidden="true"]{ display:none; }
  </style>
</head>
<body>
  <!-- Password overlay (paste near top of <body>) -->
<div id="pw-overlay" aria-hidden="false">
  <div class="pw-card" role="dialog" aria-labelledby="pwTitle">
    <h2 id="pwTitle">ওয়েবসাইট পাসওয়ার্ড দরকার</h2>
    <p>সাইটটি দেখতে পাসওয়ার্ড দিন।</p>
    <input id="pwInput" type="password" placeholder="Password" autocomplete="off" />
    <button id="pwBtn">Unlock</button>
    <div class="pw-note">Session পর্যন্ত স্মরণ করা হবে — ট্যাব বন্ধ করলে আবার পাসওয়ার্ড চাইবে।</div>
  </div>
</div>
  <h1>10 Code Store — Sahibul Musa Sium</h1>

  <!-- Code 1 -->
  <section class="snippet">
    <h2>Code 1</h2>
    <div class="subtitle">Update apscript Code</div>
    <textarea id="code1" spellcheck="false" wrap="off">/************************************
 * Dakhil-26 (BOM) – Web App API
 * Works with your HTML site's normalizeRow()
 * Author: Sahibul Musa Sium (with ❤️)
 ************************************/

// ====== CONFIG ======
const SPREADSHEET_ID = '1GuSncL5wpCvsrnf0KHfUUOImDdT2GkTPRmaguRSapCU';
const SHEET_NAME = 'Form Responses 1';

// ====== UTIL ======
function respondJson(obj) {
  return ContentService.createTextOutput(JSON.stringify(obj, null, 2))
    .setMimeType(ContentService.MimeType.JSON);
}

function isEmpty(v) { 
  return v === null || v === undefined || String(v).trim() === ''; 
}

function getHeaderIndices(headers) {
  console.log('All headers in sheet:', headers);
  
  const indices = {};
  
  // আপনার সঠিক হেডার নাম অনুযায়ী ম্যাচ করি
  for (let i = 0; i < headers.length; i++) {
    const header = String(headers[i] || '').trim();
    
    if (header === 'Timestamp') indices.timestamp = i;
    if (header === 'Subject Name:') indices.subject = i;
    if (header === 'Link:') indices.link = i;
    if (header === 'Title:') indices.title = i;
    if (header === 'File') indices.file = i; // নতুন হেডার যুক্ত
  }
  
  console.log('Found header indices:', indices);
  return indices;
}

function toIsoStringFromCell(cellValue) {
  try {
    if (cellValue instanceof Date) {
      return Utilities.formatDate(cellValue, Session.getScriptTimeZone(), "yyyy-MM-dd'T'HH:mm:ssXXX");
    }
    
    if (typeof cellValue === 'string' && cellValue.trim() !== '') {
      const parsed = new Date(cellValue);
      if (!isNaN(parsed.getTime())) {
        return Utilities.formatDate(parsed, Session.getScriptTimeZone(), "yyyy-MM-dd'T'HH:mm:ssXXX");
      }
      return cellValue; // Return original if can't parse
    }
  } catch (e) {
    console.error('Date parsing error:', e);
  }
  
  return String(cellValue || '');
}

// ====== CORE ======
function fetchRows(ssId, sheetName) {
  try {
    const ss = SpreadsheetApp.openById(ssId);
    const sh = ss.getSheetByName(sheetName);
    if (!sh) throw new Error(`Sheet "${sheetName}" not found`);
    
    const dataRange = sh.getDataRange();
    const values = dataRange.getValues();
    
    console.log('Total rows found:', values.length);
    if (values.length < 2) return [];

    const headers = values[0];
    const idx = getHeaderIndices(headers);

    // Check if we found the essential headers
    if (Object.keys(idx).length === 0) {
      throw new Error('No matching headers found. Available headers: ' + headers.join(', '));
    }

    const out = [];
    for (let r = 1; r < values.length; r++) {
      const row = values[r];
      
      // Skip empty rows
      if (row.every(cell => isEmpty(cell))) continue;

      const timestamp = idx.timestamp !== undefined ? row[idx.timestamp] : '';
      const subject = idx.subject !== undefined ? row[idx.subject] : '';
      const link = idx.link !== undefined ? row[idx.link] : '';
      const title = idx.title !== undefined ? row[idx.title] : '';
      const file = idx.file !== undefined ? row[idx.file] : ''; // নতুন ফাইল কলাম থেকে ডেটা

      console.log(`Row ${r + 1} data:`, {
        timestamp: String(timestamp),
        subject: String(subject),
        link: String(link),
        title: String(title),
        file: String(file)
      });

      out.push({
        timestamp: toIsoStringFromCell(timestamp),
        subject: String(subject || ''),
        link: String(link || ''),
        title: String(title || ''),
        file: String(file || ''), // ফাইল ফিল্ড যুক্ত
        _row: r + 1,
        serial: out.length + 1
      });
    }
    
    console.log('Successfully processed', out.length, 'rows');
    return out;
  } catch (error) {
    console.error('Error in fetchRows:', error);
    throw error;
  }
}

// ====== HTTP HANDLERS ======
function doGet(e) {
  try {
    const params = e ? e.parameter || {} : {};
    console.log('API called with parameters:', params);
    
    const rows = fetchRows(SPREADSHEET_ID, SHEET_NAME);
    
    // Apply subject filter if provided
    const subjectFilter = (params.subject || '').toLowerCase().trim();
    let filteredRows = rows;
    if (subjectFilter) {
      filteredRows = filteredRows.filter(row => 
        row.subject.toLowerCase().includes(subjectFilter)
      );
    }

    // Apply date filter if provided
    const dateFilter = (params.date || '').trim();
    if (dateFilter) {
      filteredRows = filteredRows.filter(row => 
        row.timestamp.includes(dateFilter)
      );
    }

    // Sort by timestamp (newest first by default)
    filteredRows.sort((a, b) => {
      return new Date(b.timestamp) - new Date(a.timestamp);
    });

    return respondJson({ 
      ok: true, 
      count: filteredRows.length, 
      rows: filteredRows,
      debug: {
        total_rows_in_sheet: rows.length,
        filtered_count: filteredRows.length,
        timezone: Session.getScriptTimeZone()
      }
    });
  } catch (err) {
    console.error('API Error:', err);
    return respondJson({ 
      ok: false, 
      error: err.message,
      suggestion: 'Check the header names in your Google Sheet'
    }, 500);
  }
}
  </textarea>
    <div class="controls">
      <button onclick="selectCode('code1')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code1')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code1')">Download</button>
    </div>
  </section>

  <!-- Code 2 -->
  <section class="snippet">
    <h2>Code 2</h2>
    <div class="subtitle">Old appscript Code</div>
    <textarea id="code2" spellcheck="false" wrap="off">/************************************
 * Dakhil-26 (BOM) – Web App API
 * Works with your HTML site's normalizeRow()
 * Author: Sahibul Musa Sium (with ❤️)
 ************************************/

// ====== CONFIG ======
const SPREADSHEET_ID = '1GuSncL5wpCvsrnf0KHfUUOImDdT2GkTPRmaguRSapCU';
const SHEET_NAME = 'Form Responses 1';

// ====== UTIL ======
function respondJson(obj) {
  return ContentService.createTextOutput(JSON.stringify(obj, null, 2))
    .setMimeType(ContentService.MimeType.JSON);
}

function isEmpty(v) { 
  return v === null || v === undefined || String(v).trim() === ''; 
}

function getHeaderIndices(headers) {
  console.log('All headers in sheet:', headers);
  
  const indices = {};
  
  // আপনার সঠিক হেডার নাম অনুযায়ী ম্যাচ করি
  for (let i = 0; i < headers.length; i++) {
    const header = String(headers[i] || '').trim();
    
    if (header === 'Timestamp') indices.timestamp = i;
    if (header === 'Subject Name:') indices.subject = i;
    if (header === 'Link:') indices.link = i;
    if (header === 'Title:') indices.title = i;
  }
  
  console.log('Found header indices:', indices);
  return indices;
}

function toIsoStringFromCell(cellValue) {
  try {
    if (cellValue instanceof Date) {
      return Utilities.formatDate(cellValue, Session.getScriptTimeZone(), "yyyy-MM-dd'T'HH:mm:ssXXX");
    }
    
    if (typeof cellValue === 'string' && cellValue.trim() !== '') {
      const parsed = new Date(cellValue);
      if (!isNaN(parsed.getTime())) {
        return Utilities.formatDate(parsed, Session.getScriptTimeZone(), "yyyy-MM-dd'T'HH:mm:ssXXX");
      }
      return cellValue; // Return original if can't parse
    }
  } catch (e) {
    console.error('Date parsing error:', e);
  }
  
  return String(cellValue || '');
}

// ====== CORE ======
function fetchRows(ssId, sheetName) {
  try {
    const ss = SpreadsheetApp.openById(ssId);
    const sh = ss.getSheetByName(sheetName);
    if (!sh) throw new Error(`Sheet "${sheetName}" not found`);
    
    const dataRange = sh.getDataRange();
    const values = dataRange.getValues();
    
    console.log('Total rows found:', values.length);
    if (values.length < 2) return [];

    const headers = values[0];
    const idx = getHeaderIndices(headers);

    // Check if we found the essential headers
    if (Object.keys(idx).length === 0) {
      throw new Error('No matching headers found. Available headers: ' + headers.join(', '));
    }

    const out = [];
    for (let r = 1; r < values.length; r++) {
      const row = values[r];
      
      // Skip empty rows
      if (row.every(cell => isEmpty(cell))) continue;

      const timestamp = idx.timestamp !== undefined ? row[idx.timestamp] : '';
      const subject = idx.subject !== undefined ? row[idx.subject] : '';
      const link = idx.link !== undefined ? row[idx.link] : '';
      const title = idx.title !== undefined ? row[idx.title] : '';

      console.log(`Row ${r + 1} data:`, {
        timestamp: String(timestamp),
        subject: String(subject),
        link: String(link),
        title: String(title)
      });

      out.push({
        timestamp: toIsoStringFromCell(timestamp),
        subject: String(subject || ''),
        link: String(link || ''),
        title: String(title || ''),
        _row: r + 1,
        serial: out.length + 1
      });
    }
    
    console.log('Successfully processed', out.length, 'rows');
    return out;
  } catch (error) {
    console.error('Error in fetchRows:', error);
    throw error;
  }
}

// ====== HTTP HANDLERS ======
function doGet(e) {
  try {
    const params = e ? e.parameter || {} : {};
    console.log('API called with parameters:', params);
    
    const rows = fetchRows(SPREADSHEET_ID, SHEET_NAME);
    
    // Apply subject filter if provided
    const subjectFilter = (params.subject || '').toLowerCase().trim();
    let filteredRows = rows;
    if (subjectFilter) {
      filteredRows = filteredRows.filter(row => 
        row.subject.toLowerCase().includes(subjectFilter)
      );
    }

    // Apply date filter if provided
    const dateFilter = (params.date || '').trim();
    if (dateFilter) {
      filteredRows = filteredRows.filter(row => 
        row.timestamp.includes(dateFilter)
      );
    }

    // Sort by timestamp (newest first by default)
    filteredRows.sort((a, b) => {
      return new Date(b.timestamp) - new Date(a.timestamp);
    });

    return respondJson({ 
      ok: true, 
      count: filteredRows.length, 
      rows: filteredRows,
      debug: {
        total_rows_in_sheet: rows.length,
        filtered_count: filteredRows.length,
        timezone: Session.getScriptTimeZone()
      }
    });
  } catch (err) {
    console.error('API Error:', err);
    return respondJson({ 
      ok: false, 
      error: err.message,
      suggestion: 'Check the header names in your Google Sheet'
    }, 500);
  }
}</textarea>
    <div class="controls">
      <button onclick="selectCode('code2')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code2')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code2')">Download</button>
    </div>
  </section>

  <!-- Code 3 -->
  <section class="snippet">
    <h2>Code 3</h2>
    <div class="subtitle">Update data normalize row Code</div>
    <textarea id="code3" spellcheck="false" wrap="off">function normalizeRows(rows) {
  try {
    // প্রথমে ক্লাসগুলোকে সাবজেক্ট অনুযায়ী গ্রুপ করা
    const groupedBySubject = rows.reduce((acc, row) => {
      const subjectFromSheet = row.subject || 'Unknown Subject';
      const matchedSubject = findBestMatchingSubject(subjectFromSheet) || subjectFromSheet;
      if (!acc[matchedSubject]) {
        acc[matchedSubject] = [];
      }
      acc[matchedSubject].push(row);
      return acc;
    }, {});

    // নির্দিষ্ট ফোল্ডারগুলো
    const specialFolders = ["মিশন", "ক্লাসের লেকচার শীট", "পরীক্ষার রেজাল্ট শীট"];

    // প্রতিটি সাবজেক্টের ক্লাসগুলোকে টাইমস্ট্যাম্প অনুযায়ী সাজানো (পুরানো থেকে নতুন)
    const normalizedRows = [];
    Object.keys(groupedBySubject).forEach(subject => {
      const sortedClasses = groupedBySubject[subject].sort((a, b) => {
        return new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime();
      });

      // প্রতিটি ক্লাসের জন্য সিরিয়াল নাম্বার যুক্ত করা
      sortedClasses.forEach((row, index) => {
        const timestamp = row.timestamp || '';
        // স্পেশাল ফোল্ডারের জন্য কলাম C (link) থাকলে সেটি, নইলে কলাম E (file) নেওয়া
        let link = '#';
        if (specialFolders.includes(subject)) {
          link = row.link || row.file || '#'; // প্রথমে C, নইলে E
        } else {
          link = row.link || '#'; // অন্য ফোল্ডারের জন্য শুধুমাত্র C
        }
        const title = row.title || 'ক্লাস ভিডিও';
        const date = getDateFromTimestamp(timestamp);
        const time = getTimeFromTimestamp(timestamp);
        const serial = index + 1;

        normalizedRows.push({
          subject: subject,
          originalSubject: row.subject,
          link: link, // একটি লিংক (C অথবা E)
          title: title,
          date: date,
          time: time,
          serial: serial,
          timestamp: timestamp
        });
      });
    });

    return normalizedRows;
  } catch (error) {
    console.error("Rows normalization error:", error);
    return [];
  }
}</textarea>
    <div class="controls">
      <button onclick="selectCode('code3')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code3')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code3')">Download</button>
    </div>
  </section>

  <!-- Code 4 -->
  <section class="snippet">
    <h2>Code 4</h2>
    <div class="subtitle">👉 সাবমিশন Form</div>
    <textarea id="code4" spellcheck="false" wrap="off">function doPost(e) {
  try {
    // প্রথমে raw data দেখাই
    Logger.log("Raw Data: " + e.postData.contents);

    // JSON parse করার চেষ্টা
    var data = JSON.parse(e.postData.contents || "{}");
    Logger.log("Parsed Data: " + JSON.stringify(data));

    // শীট খোলার চেষ্টা
    var sheet = SpreadsheetApp.openById("1QV0CHpQmvC2FqJo3_aeSqtu3o-QAXWhhOV_PsAmK1es")
                               .getSheetByName("Sheet1");

    // শীটে row add করার চেষ্টা (Date, Name, Batch, Message ক্রমানুসারে)
    sheet.appendRow([new Date(), data.name, data.batch, data.message]);

    return ContentService.createTextOutput("Success: " + data.name)
                         .setMimeType(ContentService.MimeType.TEXT);

  } catch (err) {
    Logger.log("ERROR: " + err);
    return ContentService.createTextOutput("ERROR: " + err)
                         .setMimeType(ContentService.MimeType.TEXT);
  }
}

<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>কমেন্ট এবং সাবমিশন সিস্টেম</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla:wght@400;700&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* === আগের CSS অপরিবর্তিত === */
:root{
--primary:#2563eb; --primary-dark:#1e40af; --secondary:#10b981; --accent:#8b5cf6; --danger:#ef4444;
--warning:#f59e0b; --dark:#0f172a; --darker:#0a0e1a; --light:#f1f5f9; --text:#e2e8f0;
--text-muted:#94a3b8; --card-bg:rgba(30,41,59,0.7); --card-border:rgba(255,255,255,0.08);
--glass:rgba(15,23,42,0.6); --glass-border:rgba(255,255,255,0.1);
--gradient-primary:linear-gradient(135deg,#2563eb 0%,#10b981 100%);
--gradient-secondary:linear-gradient(135deg,#8b5cf6 0%,#ec4899 100%);
--shadow-sm:0 4px 6px rgba(0,0,0,0.1); --shadow-md:0 10px 15px -3px rgba(0,0,0,0.2);
--shadow-lg:0 20px 25px -5px rgba(0,0,0,0.3); --radius:12px; --transition:all 0.3s ease;
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{background:var(--darker);color:var(--text);font-family:'Poppins','Tiro Bangla',system-ui,sans-serif;line-height:1.6;min-height:100vh;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none;}
body::-webkit-scrollbar{display:none;}
.bangla-font{font-family:'Tiro Bangla','Poppins',serif;}
.container{max-width:980px;margin:40px auto;padding:20px;}
.action-buttons{display:flex;justify-content:center;gap:12px;margin-bottom:20px;}
.form-button,.submissions-button{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:8px;border:none;background:var(--gradient-secondary);color:white;font-weight:600;font-size:0.85rem;cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-sm);position:relative;overflow:hidden;}
.form-button:hover,.submissions-button:hover{transform:translateY(-2px);box-shadow:var(--shadow-md);}
.form-button::before,.submissions-button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:0.5s;}
.form-button:hover::before,.submissions-button:hover::before{left:100%;}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);justify-content:center;align-items:center;z-index:1000;backdrop-filter:blur(5px);}
.modal-content{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:25px;max-width:600px;width:90%;backdrop-filter:blur(12px);box-shadow:var(--shadow-lg);position:relative;overflow:auto;max-height:80vh;}
.modal-content::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);}
.modal-close{position:absolute;top:15px;right:15px;background:none;border:none;color:var(--text-muted);font-size:1.5rem;cursor:pointer;transition:var(--transition);}
.modal-close:hover{color:var(--danger);}
.modal-intro{margin-bottom:20px;text-align:center;}
.modal-intro h2{font-size:1.4rem;background:var(--gradient-primary);-webkit-background-clip:text;background-clip:text;color:transparent;margin-bottom:10px;}
.modal-intro p{color:var(--text-muted);font-size:0.9rem;line-height:1.6;}
.form-section{display:flex;flex-direction:column;gap:15px;}
.form-section label{font-weight:bold;font-size:0.95rem;color:var(--text);text-align:left;}
.form-section input,.form-section select,.form-section textarea{padding:12px 16px;border-radius:10px;border:1px solid var(--card-border);background:var(--glass);color:var(--text);outline:none;transition:var(--transition);backdrop-filter:blur(10px);font-size:0.9rem;}
.form-section input:focus,.form-section select:focus,.form-section textarea:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,0.2);}
.form-section textarea{resize:vertical;min-height:120px;}
.submit-button{width:100%;padding:12px;border-radius:10px;border:none;background:var(--gradient-primary);color:white;font-weight:600;font-size:0.95rem;cursor:pointer;transition:var(--transition);box-shadow:0 4px 10px rgba(37,99,235,0.3);}
.submit-button:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(37,99,235,0.4);}
.success-message{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--secondary);color:white;padding:20px 40px;border-radius:10px;z-index:2000;font-size:1rem;box-shadow:var(--shadow-md);text-align:center;max-width:80%;}
.notification{position:fixed;bottom:30px;right:30px;padding:15px 22px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:10px;box-shadow:var(--shadow-lg);z-index:1000;opacity:0;transform:translateY(20px);transition:opacity 0.3s,transform 0.3s;backdrop-filter:blur(15px);display:flex;align-items:center;gap:10px;max-width:350px;font-size:0.9rem;}
.notification.show{opacity:1;transform:translateY(0);}
.notification.success{border-left:4px solid var(--secondary);}
.notification.error{border-left:4px solid var(--danger);}
@media(max-width:768px){.container{padding:15px;margin:20px;}.modal-content{padding:20px;max-height:90vh;}.action-buttons{flex-direction:column;gap:10px;}.form-button,.submissions-button{width:100%;justify-content:center;}}
@media(max-width:480px){.modal-intro h2{font-size:1.2rem;}.form-section label,.form-section input,.form-section select,.form-section textarea,.submit-button{font-size:0.85rem;}.submission-item{padding:12px;}.submission-name,.submission-message{font-size:0.85rem;}.submission-batch,.submission-time{font-size:0.75rem;}}
</style>
</head>
<body>
<div class="container">
  <div class="action-buttons">
    <button class="form-button" id="form-button"><i class="fas fa-edit"></i> <span class="bangla-font">কমেন্ট করুন</span></button>
    <button class="submissions-button" id="submissions-button"><i class="fas fa-list-alt"></i> <span class="bangla-font">সাবমিশন দেখুন</span></button>
  </div>
</div>

<!-- Form Modal -->
<div class="modal" id="formModal">
  <div class="modal-content">
    <button class="modal-close" onclick="hideForm()">×</button>
    <div class="modal-intro">
      <h2 class="bangla-font">আপনার মতামত আমাদের কাছে মূল্যবান</h2>
      <p class="bangla-font">প্রিয় শিক্ষার্থী, আমাদের শিক্ষামূলক ওয়েবসাইট আপনাদের শিক্ষা ও জ্ঞানার্জনের পথকে আরও সহজ ও ফলপ্রসূ করতে প্রতিশ্রুতিবদ্ধ। নিচের ফর্মটি পূরণ করুন।</p>
    </div>
    <div class="form-section">
      <form id="myForm" onsubmit="submitForm(event)">
        <label class="bangla-font" for="name">নাম</label>
        <input type="text" name="name" id="name" placeholder="আপনার নাম" required class="bangla-font">
        <label class="bangla-font" for="batch">ব্যাচ নাম</label>
        <select name="batch" id="batch" required class="bangla-font">
          <option value="" disabled selected class="bangla-font">ব্যাচ নির্বাচন করুন</option>
          <option value="Alim-25" class="bangla-font">আলিম-২৫</option>
          <option value="Dakhil-26" class="bangla-font">দাখিল-২৬</option>
          <option value="Alim-26" class="bangla-font">আলিম-২৬</option>
        </select>
        <label class="bangla-font" for="message">মতামত/পরামর্শ/অভিযোগ</label>
        <textarea name="message" id="message" placeholder="আপনার মতামত লিখুন" required class="bangla-font"></textarea>
        <button type="submit" class="submit-button bangla-font">জমা দিন</button>
      </form>
    </div>
  </div>
</div>

<!-- Submissions Modal -->
<div class="modal" id="submissionsModal">
  <div class="modal-content">
    <button class="modal-close" onclick="hideSubmissions()">×</button>
    <div class="modal-intro">
      <h2 class="bangla-font">সাবমিশন তালিকা</h2>
      <p class="bangla-font">এখানে সকল সাবমিশন দেখুন।</p>
    </div>
    <div id="submissions-list" class="submissions-list"></div>
  </div>
</div>

<div class="success-message" id="successMessage">ফর্ম সফলভাবে জমা হয়েছে!</div>
<div id="notification" class="notification"></div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyhF1MbIgfLLiox5IlVxztrUZCN9sxEBtj5-4IfypATarCnm7tbMpr-9Omb0DY8eP9hzg/exec"; // আপনার working URL

function $(sel){ return document.querySelector(sel); }

function showNotification(message, isError=false){
  const notification = $('#notification');
  notification.innerHTML = `<i class="${isError?'fas fa-exclamation-circle':'fas fa-check-circle'}"></i> <span class="bangla-font">${message}</span>`;
  notification.className=`notification ${isError?'error':'success'}`;
  notification.classList.add('show');
  setTimeout(()=>notification.classList.remove('show'),3000);
}

function showForm(){ $('#formModal').style.display='flex'; $('#myForm').reset(); }
function hideForm(){ $('#formModal').style.display='none'; }
function showSubmissions(){ $('#submissionsModal').style.display='flex'; }
function hideSubmissions(){ $('#submissionsModal').style.display='none'; }

function submitForm(event){
  event.preventDefault();
  const form = $('#myForm');
  const data = {
    name: form.name.value.trim(),
    batch: form.batch.value,
    message: form.message.value.trim()
  };

  fetch(WEB_APP_URL,{
    method:'POST',
    body:JSON.stringify(data)
  })
  .then(res=>res.text())
  .then(txt=>{
    if(txt.startsWith("Success")){
      form.reset(); hideForm(); showSuccessMessage();
    }else{
      showNotification("ডেটা জমা হয়নি! আবার চেষ্টা করুন।", true);
    }
  })
  .catch(()=>showNotification("ডেটা জমা হয়নি! আবার চেষ্টা করুন।", true));
}

function showSuccessMessage(){
  const successMessage = $('#successMessage');
  successMessage.style.display='block';
  setTimeout(()=>successMessage.style.display='none',3000);
}

$('#form-button').addEventListener('click',showForm);
$('#submissions-button').addEventListener('click',showSubmissions);
window.addEventListener('click',(e)=>{ if(e.target==$('#formModal')) hideForm(); if(e.target==$('#submissionsModal')) hideSubmissions(); });
</script>
</body>
</html></textarea>
    <div class="controls">
      <button onclick="selectCode('code4')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code4')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code4')">Download</button>
    </div>
  </section>

  <!-- Code 5 -->
  <section class="snippet">
    <h2>Code 5</h2>
    <div class="subtitle">👉 Table Design</div>
    <textarea id="code5" spellcheck="false" wrap="off"><!-- এখানে Code 5 লিখুন --></textarea>
    <div class="controls">
      <button onclick="selectCode('code5')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code5')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code5')">Download</button>
    </div>
  </section>

  <!-- Code 6 -->
  <section class="snippet">
    <h2>Code 6</h2>
    <div class="subtitle">👉 Navigation Menu</div>
    <textarea id="code6" spellcheck="false" wrap="off"><!-- এখানে Code 6 লিখুন --></textarea>
    <div class="controls">
      <button onclick="selectCode('code6')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code6')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code6')">Download</button>
    </div>
  </section>

  <!-- Code 7 -->
  <section class="snippet">
    <h2>Code 7</h2>
    <div class="subtitle">👉 Image Gallery</div>
    <textarea id="code7" spellcheck="false" wrap="off"><!-- এখানে Code 7 লিখুন --></textarea>
    <div class="controls">
      <button onclick="selectCode('code7')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code7')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code7')">Download</button>
    </div>
  </section>

  <!-- Code 8 -->
  <section class="snippet">
    <h2>Code 8</h2>
    <div class="subtitle">👉 Profile Card</div>
    <textarea id="code8" spellcheck="false" wrap="off"><!-- এখানে Code 8 লিখুন --></textarea>
    <div class="controls">
      <button onclick="selectCode('code8')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code8')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code8')">Download</button>
    </div>
  </section>

  <!-- Code 9 -->
  <section class="snippet">
    <h2>Code 9</h2>
    <div class="subtitle">👉 Footer Section</div>
    <textarea id="code9" spellcheck="false" wrap="off"><!-- এখানে Code 9 লিখুন --></textarea>
    <div class="controls">
      <button onclick="selectCode('code9')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code9')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code9')">Download</button>
    </div>
  </section>

  <!-- Code 10 -->
  <section class="snippet">
    <h2>Code 10</h2>
    <div class="subtitle">👉 Full Page Template</div>
    <textarea id="code10" spellcheck="false" wrap="off"><!-- এখানে Code 10 লিখুন --></textarea>
    <div class="controls">
      <button onclick="selectCode('code10')">Select All</button>
      <button class="btn-blue" onclick="copyCode('code10')">Copy</button>
      <button class="btn-green" onclick="downloadCode('code10')">Download</button>
    </div>
  </section>

  <script>
    function selectCode(id){
      const ta = document.getElementById(id);
      ta.focus();
      ta.select();
    }

    async function copyCode(id){
      const ta = document.getElementById(id);
      try {
        ta.select();
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(ta.value);
        } else {
          document.execCommand('copy');
        }
        alert(id + ' এর কোড কপি হয়ে গেছে!');
      } catch(e){
        alert('কপি হয়নি, ম্যানুয়ালি চেষ্টা করুন।');
      }
    }

    function downloadCode(id){
      const ta = document.getElementById(id);
      const blob = new Blob([ta.value], {type: 'text/html;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = id + ".html";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }
    <!-- Password logic (paste before </body>) -->
(function(){
  // ===== CONFIGURE PASSWORD HERE =====
  const PASSWORD = 'Sahibul@2008';
  // ===== /CONFIG =====

  const overlay = document.getElementById('pw-overlay');
  const input = document.getElementById('pwInput');
  const btn = document.getElementById('pwBtn');

  // যদি আগে session এ আনলক করা থাকে তাহলে সরাসরি দেখাবে
  if (sessionStorage.getItem('site_unlocked') === '1') {
    overlay.setAttribute('aria-hidden','true');
  } else {
    overlay.setAttribute('aria-hidden','false');
    input.focus();
  }

  function unlock() {
    const v = (input.value || '').trim();
    if (!v) { alert('পাসওয়ার্ড দিন।'); input.focus(); return; }
    if (v === PASSWORD) {
      sessionStorage.setItem('site_unlocked','1'); // সেশন পর্যন্ত
      overlay.setAttribute('aria-hidden','true');
      input.value = '';
    } else {
      alert('পাসওয়ার্ড ভুল। আবার চেষ্টা করুন।');
      input.value = '';
      input.focus();
    }
  }

  btn.addEventListener('click', unlock);
  input.addEventListener('keydown', function(e){ if (e.key === 'Enter') unlock(); });

  // (অপশনাল) Ctrl+Shift+U দিয়ে দ্রুত আনলক — ডেভ টুলস থেকে কপি/চেঞ্জ করলেও কাজে আসবে না;
  // নিরাপত্তা বাড়াতে এই লাইনটি মুছে ফেলতে পারেন
  document.addEventListener('keydown', function(e){
    if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'u') {
      // quick hint (optional) — comment বা remove for more secrecy
      alert('পাসওয়ার্ড টিপুন।');
    }
  });
})();
  </script>
</body>
</html>
